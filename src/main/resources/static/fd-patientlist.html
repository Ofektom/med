<!DOCTYPE html>
<html lang="en">

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EMR Patient List</title>
  <link rel="icon" type="image/x-icon" href="includes/images/favicon.ico">
  <link rel="stylesheet" href="assets/css/bootstrap-icons.css">
  <link rel="stylesheet" href="assets/css/responsive.bootstrap5.min.css">
  <link rel="stylesheet" href="assets/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet"
    href="assets/css/bootstrap-datepicker.min.css">
  <link rel="stylesheet" href="../../../../cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="assets/css/bootstrap.css">
  <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
  <div id="preloader"></div>

  <div class="d-flex body-main body-color" id="wrapper">
   <!-- backdrop -->
   <div class="sidebar-backdrop"></div>
   <div class="sidebar-main">
     <div class="sidebar h-100 bg-dark-primary close" id="sidebar-wrapper">
       <div class="sidebar-box text-center position-fixed slim-outer bg-dark-primary">
         <div class="sidebar-heading bg-dark d-flex align-items-center justify-content-between p-3 border-dark border-bottom">
           <a href="index.html">
             <img src="includes/images/healthcare-logo.png" width="200" alt="">
           </a>
           <button class="btn btn-primary rounded   closesidebar d-lg-none btn-sm"> <i class="fa-solid fa-xmark text-white"></i></button> 
         </div>
         <div class="sidebar-box-data text-start px-3" id="sidebar-data">
            <div class="list-group list-group-flush mt-3">
              <div class="accordion" id="accordionExampleOne">
                <div class="accordion-item mb-4">
                  <a href="/fd-dashboard.html" class="active no-arrow rounded accordion-button p-2 fw-600 text-white mb-0 d-flex align-items-center">
                    <i class="bi bi-grid-1x2-fill px-2"></i><span>FRONTDESK Dashboard</span>
                  </a>
                </div>
                <div class="accordion-item mb-4">
                  <div class="accordion-header" id="headingTwo">
                    <button class="accordion-button p-2 collapsed text-white mb-0 d-flex align-items-center" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                      <i class="fa-solid fa-users px-2"></i><span class="fw-600">Patient</span>
                    </button>
                  </div>
                  <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo" data-bs-parent="#accordionExampleOne">
                    <div class="accordion-body">
                      <ul class="navbar-nav d-block">
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-patientlist.html">patient List</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white active" href="/fd-addpatient.html">Add patient</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-editpatient.html">Edit patient</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item mb-4">
                  <a href="/fd-stafflist.html" class="no-arrow rounded accordion-button p-2 fw-600 text-white mb-0 d-flex align-items-center">
                    <i class="fa-regular fa-address-book px-2"></i>Staff
                  </a>
                </div>
                <div class="accordion-item mb-4">
                  <a href="/fd-reports.html" class="no-arrow rounded accordion-button p-2 fw-600 text-white mb-0 d-flex align-items-center">
                    <i class="bi bi-file-earmark-pdf-fill px-2"></i><span>Reports</span>
                  </a>
                </div>
                <div class="accordion-item mb-4">
                  <div class="accordion-header" id="headingEleven">
                    <button class="accordion-button p-2 text-white mb-0 d-flex align-items-center collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEleven" aria-expanded="true" aria-controls="collapseEleven">
                      <i class="bi bi-boxes px-2"></i>Assets
                    </button>
                  </div>
                  <div id="collapseEleven" class="accordion-collapse collapse show" aria-labelledby="headingEleven" data-bs-parent="#accordionExampleOne">
                    <div class="accordion-body">
                      <ul class="navbar-nav d-block">
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-addassets.html">add asset</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-assetslist.html">view assets list</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white active" href="/fd-allassets.html">all asset</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item mb-4">
                  <div class="accordion-header" id="headingFour">
                    <button class="accordion-button p-2 collapsed text-white mb-0 d-flex align-items-center" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="true" aria-controls="collapseFour">
                      <i class="fa-solid fa-calendar-days px-2"></i>Appointments
                    </button>
                  </div>
                  <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExampleOne">
                    <div class="accordion-body">
                      <ul class="navbar-nav d-block">
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-appointmentlist.html">appointment list</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-bookappointment.html">Book Appointment</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-editappointment.html">Edit Appointment</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item mb-4">
                  <a href="/fd-departmentlist.html" class="no-arrow rounded accordion-button p-2 fw-600 text-white mb-0 d-flex align-items-center">
                    <i class="fa-solid fa-timeline px-2"></i>Department
                  </a>
                </div>
                <div class="accordion-item mb-4">
                  <a href="/fd-allotedrooms.html" class="no-arrow rounded accordion-button p-2 fw-600 text-white mb-0 d-flex align-items-center">
                    <i class="fa-solid fa-bed px-2"></i>Wards
                  </a>
                </div>
                <div class="accordion-item mb-4">
                  <div class="accordion-header" id="headingFive">
                    <button class="accordion-button p-2 collapsed text-white mb-0 d-flex align-items-center" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="true" aria-controls="collapseFive">
                      <i class="fa-solid fa-file-invoice-dollar px-2"></i>Payments
                    </button>
                  </div>
                  <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExampleOne">
                    <div class="accordion-body">
                      <ul class="navbar-nav d-block">
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-paymentlist.html">payment list</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-paymentinvoice.html">payment invoice</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item mb-4 d-block d-sm-none">
                  <div class="accordion-header" id="headingSeven">
                    <button class="accordion-button p-2 collapsed text-white mb-0 d-flex align-items-center" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="true" aria-controls="collapseSeven">
                      <i class="bi bi-bell-fill text-white px-2"></i><span class="fw-600">Notification</span>
                    </button>
                  </div>
                  <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#accordionExampleOne">
                    <div class="accordion-body">
                      <div class="slim-outer">
                        <div class="card border-0 shadow bg-white rounded-2 overflow-hidden" id="mobile-notifications">
                          <ul class="list-unstyled text-dark-primary mb-0 click-menu"></ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="accordion-item mb-4 d-block d-sm-none">
                  <div class="accordion-header" id="headingEight">
                    <button class="accordion-button p-2 collapsed text-white mb-0 d-flex align-items-center" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="true" aria-controls="collapseEight">
                      <i class="bi bi-envelope-fill text-white px-2"></i><span class="fw-600">Messages</span>
                    </button>
                  </div>
                  <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight" data-bs-parent="#accordionExampleOne">
                    <div class="accordion-body">
                      <div class="slim-outer">
                        <div class="card border-0 shadow bg-white rounded-2 overflow-hidden" id="mobile-messages">
                          <ul class="list-unstyled text-dark-primary mb-0 click-menu"></ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="accordion-item mb-4">
                  <div class="accordion-header" id="headingSeven">
                    <button class="accordion-button p-2 collapsed text-white mb-0 d-flex align-items-center" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="true" aria-controls="collapseSeven">
                      <i class="fa-solid fa-user-shield px-2"></i>Setting
                    </button>
                  </div>
                  <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#accordionExampleOne">
                    <div class="accordion-body">
                      <ul class="navbar-nav d-block">
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-adminprofile.html">Profile</a></li>
                        <li class="nav-item mb-2 rounded-3 px-3"><a class="nav-link fs-14 text-white" href="/fd-resetpass.html">Reset Password</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="page-content-wrapper" class="position-relative">
      <div class="bg-white shadow-sm px-3 py-2 mb-4 header m-auto position-fixed">
        <div class="row align-items-center">
          <div class="row flex-row-reverse justify-content-between align-items-center">
            <div class="col-lg-6">
              <div class="d-flex justify-content-lg-end justify-content-between align-items-center gap-2">
                <div class="d-block d-lg-none">
                  <button class="btn shadow-0 focus-0 sidebar-btn rounded border-0 sidebarToggle">
                    <img src="/includes/images/menu-icons.svg" alt="">
                  </button>
                  <a href="/fd-dashboard.html">
                    <img src="/includes/images/ERP-Logo(1).png" width="180" alt="">
                  </a>
                </div>
                <div class="d-flex align-items-center">
                  <div class="maximize d-none d-lg-block">
                    <a class="badge-purple d-flex align-items-center text-primary" href="javascript:void(0)" id="fullscreen">
                    </a>
                  </div>
                  <div class="position-relative rounded d-lg-none">
                    <a class="text-primary py-2 px-3 btn btn-transparent outline-0 focus-0 rounded btn-cust-sm"
                      data-bs-toggle="collapse" href="#searchcollapse" role="button" aria-expanded="false"
                      aria-controls="searchcollapse">
                      <i class="bi bi-search"></i>
                    </a>
                    <div class="collapse position-absolute top-100 mt-2 end-0 z-3 mw-250 mw-100" id="searchcollapse">
                      <div class="card card-body">
                        <form>
                          <div class="border bg-light position-relative h-100 d-flex align-items-center header-search mw-100">
                            <button class="btn btn-transparent border-0 position-absolute ms-1">
                              <img src="/includes/images/search2.svg" alt="">
                            </button>
                            <input type="search" class="form-control border-0 bg-transparent shadow-none ps-5 py-2"
                              placeholder="Search here..">
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown d-none d-sm-block">
                    <button type="button" class="btn rounded position-relative" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      <i class="fa-solid fa-envelope fs-5 text-success pb-0 mb-0"></i>
                      <span class="msg-lite">
                        <span class="circles cust_circle">
                          <span class="circle1"></span>
                          <span class="circle2"></span>
                          <span class="circle3"></span>
                        </span>
                      </span>
                    </button>
                    <div class="dropdown-menu dropdown-notification dropdown-menu-end dropdown-mega p-0 border-0 rounded-10 bg-transparent">
                      <div class="animate slideIn">
                        <div class="card border-0 shadow bg-white rounded-10 overflow-hidden slim-outer">
                          <div class="bg-light p-3">
                            <h6 class="text-center mb-0">Messages</h6>
                          </div>
                          <ul class="list-unstyled text-dark-primary mb-0 click-menu px-2 py-3" id="message_box">
                            <!-- Populated dynamically via JavaScript -->
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown d-none d-sm-block">
                    <button type="button" class="btn rounded position-relative" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      <i class="fa-solid fa-bell fs-5 text-orange pb-0 mb-0"></i>
                      <span class="notification-lite">
                        <span class="circles cust_circle">
                          <span class="circle1"></span>
                          <span class="circle2"></span>
                          <span class="circle3"></span>
                        </span>
                      </span>
                    </button>
                    <div class="dropdown-menu dropdown-notification dropdown-menu-end dropdown-mega p-0 border-0 rounded-10 bg-transparent">
                      <div class="animate slideIn">
                        <div class="card border-0 shadow bg-white rounded-10 overflow-hidden slim-outer slim-outer">
                          <div class="bg-light p-3">
                            <h6 class="text-center mb-0">Notifications</h6>
                          </div>
                          <ul class="list-unstyled text-dark-primary mb-0 click-menu px-2 py-3" id="notification_box">
                            <!-- Populated dynamically via JavaScript -->
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown user">
                    <button type="button" class="pill-badge btn md-mw-150 me-xl-3 d-flex align-items-center text-start rounded px-0"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      <img src="/includes/images/01_2.png" alt="" class="border rounded">
                      <span class="justify-content-between align-items-center gap-4 px-2 w-100 d-none d-xl-flex">
                        <span class="my-0 py-0 lh-1">
                          <span class="pill-badge-msg lh-sm text-capitalize pb-0 mb-0 d-block user-firstname"></span>
                          <span class="fs-12 p-0 d-block user-role"></span>
                        </span>
                        <span class="my-0 py-0">
                          <i class="bi bi-chevron-down"></i>
                        </span>
                      </span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end dropdown-mega p-0 border-0 rounded-3 bg-transparent">
                      <div class="animate slideIn">
                        <div class="card bg-white rounded-10 shadow-sm overflow-hidden">
                          <div class="bg-light p-3">
                            <h6 class="mb-0 fs-14 fw-500 mb-1 dropdown-user-greeting"></h6>
                            <p class="mb-0 fs-12 fw-500 user-status"></p>
                          </div>
                          <ul class="list-unstyled text-dark-primary mb-0 click-menu p-3">
                            <li class="py-3 px-2 rounded-end-3">
                              <a href="/fd-profile.html">
                                <div class="d-flex align-items-center">
                                  <div class="rounded bg-light reward-circle d-flex align-items-center justify-content-center me-3 text-center">
                                    <i class="fa fa-user fs-5 text-primary"></i>
                                  </div>
                                  <div>
                                    <h6 class="text-dark fs-14 mb-0">My Profile</h6>
                                    <p class="text-light fs-12 mb-0">View Profile Details</p>
                                  </div>
                                </div>
                              </a>
                            </li>
                          </ul>
                          <div class="mb-2 text-center">
                            <a class="btn btn-primary btn-15 rounded-pill mw-120 logout-btn">Logout <i class="fa fa-sign-out"></i></a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-6 d-none d-lg-block">
              <div class="d-lg-flex align-items-center">
                <button class="btn shadow-0 focus-0 d-none d-lg-block sidebar-btn rounded border-0 sidebarToggle">
                  <img src="/includes/images/menu-icons.svg" alt="">
                </button>
                <form id="desktop-search-form" class="d-none d-lg-block mw-200 position-relative">
                  <div class="bg-light-blue position-relative h-100 d-flex align-items-center header-search rounded-10">
                    <button class="btn btn-transparent border-0 position-absolute top-0">
                      <img src="/includes/images/search2.svg" alt="">
                    </button>
                    <input type="search" class="form-control border-0 bg-transparent shadow-none ps-5 py-2 desktop-search-input" placeholder="Search rooms..">
                  </div>
                  <div id="desktop-search-results" class="position-absolute top-100 mt-2 start-0 end-0 z-3 bg-white shadow rounded-3" style="display: none;">
                    <ul class="list-unstyled text-dark-primary mb-0 click-menu"></ul>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="px-4 mb-4 min-vh-100 outer-main">
        <h3 class="fw-600 text-dark-primary text-capitalize">Patient List</h3>
        <div class="d-flex flex-wrap justify-content-between align-items-center my-3">
          <div class="d-flex flex-wrap text-capitalize align-items-center">
            <p class="mb-0 pb-0 fw-bold text-dark-primary"><a href="/fd-dashboard.html">Home</a></p>
            <i class="bi bi-chevron-right pagination-arrow text-dark-primary"></i>
            <p class="mb-0 pb-0 text-dark">Patient List</p>
          </div>
          <a href="/fd-addpatient.html"
            class="btn btn-primary rounded-4 fw-500 py-2 rounded-pill mw-120 px-4 text-capitalize"> <i
              class="bi bi-plus-circle me-2"></i> add new patient</a>
        </div>

        <div class="bg-white  rounded-10 my-3 p-4">
          <table class="table custom-data-table" id="patientlistdt">
            <thead>
              <tr>
                <th class="text-dark-primary no-sort  ">
                  <input type="checkbox" class="">
                </th>
                <th class="text-dark-primary  ">
                  Patient ID
                </th>
                <th class="text-dark-primary  ">
                  Date Check In
                </th>
                <th class="text-dark-primary  ">
                  Patient Name
                </th>
                <th class="text-dark-primary  ">
                  Doctor Assigned
                </th>
                <th class="text-dark-primary  ">
                  diseases
                </th>
                <th class="text-dark-primary  ">
                  Status
                </th>
                <th class="text-dark-primary  ">
                  Room No
                </th>
                <th class="text-dark-primary no-sort  ">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td> <input type="checkbox"></td>
                <td>#004</td>
                <td>26/02/2022</td>
                <td>Cive Slauw</td>
                <td>Dr.samantha</td>
                <td>Sleep problem</td>
                <td>
                  <span
                    class="custom-badge badge bg-primary text-white align-items-center rounded-pill text-capitalize">
                    New patient
                  </span>
                </td>
                <td>ab-004</td>
                <td>
                  <div class="dropdown">
                    <button class="btn rounded-10" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0 border-0  rounded-10 bg-transparent">
                      <div class="animate slideIn card bg-white rounded-2">
                        <ul class="list-unstyled mb-0">
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#viewpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="bi bi-eye"></i></span>Quick View</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#detailpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="fa fa-file"></i></span>Detail View / History</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              href="/fd-editpatient.html">
                              <span class="px-2 py-1 me-2"><i class="bi bi-pen-fill"></i></span>Edit</a>
                          </li>
                          <li>
                            <a href="javascript:void(0)"
                              class="dropdown-item border-b-dashed py-2 text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#deleteconf">
                              <span class="px-2 py-1 me-2"><i class=" bi bi-trash"></i></span>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
              <tr>
                <td> <input type="checkbox"></td>
                <td>#005</td>
                <td>28/02/2022</td>
                <td>Andrew</td>
                <td>Dr.samantha</td>
                <td>Eye care</td>
                <td>
                  <span
                    class="custom-badge badge bg-secondary text-white align-items-center rounded-pill  text-capitalize">
                    Recovered
                  </span>
                </td>
                <td>ab-007</td>
                <td>
                  <div class="dropdown">
                    <button class="btn rounded-10" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0 border-0  rounded-10 bg-transparent">
                      <div class="animate slideIn card bg-white rounded-2">
                        <ul class="list-unstyled mb-0">
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#viewpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="bi bi-eye"></i></span>Quick View</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#detailpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="fa fa-file"></i></span>Detail View / History</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              href="/fd-editpatient.html">
                              <span class="px-2 py-1 me-2"><i class="bi bi-pen-fill"></i></span>Edit</a>
                          </li>
                          <li>
                            <a href="javascript:void(0)"
                              class="dropdown-item border-b-dashed py-2 text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#deleteconf">
                              <span class="px-2 py-1 me-2"><i class=" bi bi-trash"></i></span>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
              <tr>
                <td> <input type="checkbox"></td>
                <td>#006</td>
                <td>28/02/2022</td>
                <td>John</td>
                <td>Dr.Jacob</td>
                <td>Eye sight week</td>
                <td>
                  <span
                    class="custom-badge badge bg-secondary text-white align-items-center rounded-pill  text-capitalize">
                    old patient
                  </span>
                </td>
                <td>ab-004</td>
                <td>
                  <div class="dropdown">
                    <button class="btn rounded-10" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0 border-0  rounded-10 bg-transparent">
                      <div class="animate slideIn card bg-white rounded-2">
                        <ul class="list-unstyled mb-0">
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#viewpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="bi bi-eye"></i></span>Quick View</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#detailpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="fa fa-file"></i></span>Detail View / History</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              href="/fd-editpatient.html">
                              <span class="px-2 py-1 me-2"><i class="bi bi-pen-fill"></i></span>Edit</a>
                          </li>
                          <li>
                            <a href="javascript:void(0)"
                              class="dropdown-item border-b-dashed py-2 text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#deleteconf">
                              <span class="px-2 py-1 me-2"><i class=" bi bi-trash"></i></span>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
              <tr>
                <td> <input type="checkbox"></td>
                <td>#007</td>
                <td>28/02/2022</td>
                <td>Lisa</td>
                <td>Dr.august</td>
                <td>Skin rashes</td>
                <td>
                  <span
                    class="custom-badge badge bg-secondary text-white align-items-center rounded-pill  text-capitalize">
                    Recovered
                  </span>
                </td>
                <td>ab-007</td>
                <td>
                  <div class="dropdown">
                    <button class="btn rounded-10" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0 border-0  rounded-10 bg-transparent">
                      <div class="animate slideIn card bg-white rounded-2">
                        <ul class="list-unstyled mb-0">
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#viewpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="bi bi-eye"></i></span>Quick View</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#detailpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="fa fa-file"></i></span>Detail View / History</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              href="/fd-editpatient.html">
                              <span class="px-2 py-1 me-2"><i class="bi bi-pen-fill"></i></span>Edit</a>
                          </li>
                          <li>
                            <a href="javascript:void(0)"
                              class="dropdown-item border-b-dashed py-2 text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#deleteconf">
                              <span class="px-2 py-1 me-2"><i class=" bi bi-trash"></i></span>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
              <tr>
                <td> <input type="checkbox"></td>
                <td>#008</td>
                <td>30/02/2022</td>
                <td>Andria</td>
                <td>Dr.samantha</td>
                <td>Sleep problem</td>
                <td>
                  <span
                    class="custom-badge badge bg-primary text-white align-items-center rounded-pill text-capitalize">
                    New patient
                  </span>
                </td>
                <td>ab-004</td>
                <td>
                  <div class="dropdown">
                    <button class="btn rounded-10" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0 border-0  rounded-10 bg-transparent">
                      <div class="animate slideIn card bg-white rounded-2">
                        <ul class="list-unstyled mb-0">
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#viewpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="bi bi-eye"></i></span>Quick View</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#detailpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="fa fa-file"></i></span>Detail View / History</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              href="/fd-editpatient.html">
                              <span class="px-2 py-1 me-2"><i class="bi bi-pen-fill"></i></span>Edit</a>
                          </li>
                          <li>
                            <a href="javascript:void(0)"
                              class="dropdown-item border-b-dashed py-2 text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#deleteconf">
                              <span class="px-2 py-1 me-2"><i class=" bi bi-trash"></i></span>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
              <tr>
                <td> <input type="checkbox"></td>
                <td>#009</td>
                <td>02/03/2022</td>
                <td>james</td>
                <td>Dr.samantha</td>
                <td>Eye care</td>
                <td>
                  <span
                    class="custom-badge badge bg-secondary text-white align-items-center rounded-pill  text-capitalize">
                    Recovered
                  </span>
                </td>
                <td>ab-007</td>
                <td>
                  <div class="dropdown">
                    <button class="btn rounded-10" data-bs-toggle="dropdown" aria-expanded="false">
                      <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0 border-0  rounded-10 bg-transparent">
                      <div class="animate slideIn card bg-white rounded-2">
                        <ul class="list-unstyled mb-0">
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#viewpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="bi bi-eye"></i></span>Quick View</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#detailpatientmodal" href="javascript:void(0)">
                              <span class="px-2 py-1 me-2"><i class="fa fa-file"></i></span>Detail View / History</a>
                          </li>
                          <li>
                            <a class="dropdown-item py-2 border-b-dashed text-dark-primary fs-14 fw-600"
                              href="/fd-editpatient.html">
                              <span class="px-2 py-1 me-2"><i class="bi bi-pen-fill"></i></span>Edit</a>
                          </li>
                          <li>
                            <a href="javascript:void(0)"
                              class="dropdown-item border-b-dashed py-2 text-dark-primary fs-14 fw-600"
                              data-bs-toggle="modal" data-bs-target="#deleteconf">
                              <span class="px-2 py-1 me-2"><i class=" bi bi-trash"></i></span>Delete</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- footer -->
      <div
        class="shadow-sm py-4 px-4 bg-white footer d-flex flex-wrap justify-content-between align-items-center  fs-14">
        <div>
          <span id="currentYear"></span> © All Rights Reserved By Health Care ERP
        </div>
        <div>
          <a href="javascript:void(0)" class="text-primary text-decoration-underline fw-600">Privacy Policy</a> | <a
            href="javascript:void(0)" class="text-primary text-decoration-underline fw-600">Terms & Conditions</a>
        </div>
      </div>
    </div>
    <!-- pagecontent -->
  </div>
  <!-- modal -->
  <div class="modal fade" id="viewpatientmodal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog  rounded-10 modal-dialog-centered">
      <div class="modal-content border-0">
        <div class="modal-header">
          <h5 class="text-dark text-capitalize mb-0 p-3 text-gray">Patient Detail</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-0 py-4">
          <div class="d-flex justify-content-center">
            <div class="patient-img text-center mb-3">
              <img src="/includes/images/pexels-mart-production-7089401.jpg" alt="" class="rounded-circle">
            </div>
          </div>
          <div class="patient-card-body">
            <h4 class="text-dark my-3 border-bottom px-4 py-3">Patient Details</h4>
            <div class="row px-4">
              <div class="col-sm-4  mb-2 fw-bold">Name:</div>
              <div class="col-sm-8  mb-2">Travis</div>
              <div class="col-sm-4  mb-2 fw-bold">Age:</div>
              <div class="col-sm-8  mb-2">30</div>
              <div class="col-sm-4  mb-2 fw-bold">Gender:</div>
              <div class="col-sm-8  mb-2">Male</div>
              <div class="col-sm-4  mb-2 fw-bold">Address:</div>
              <div class="col-sm-8  mb-2 multi-ellip">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quod
                excepturi quia quidem vero voluptas? Cupiditate.</div>
              <div class="col-sm-4  mb-2 fw-bold">Email:</div>
              <div class="col-sm-8  mb-2">bin123@gmail.com</div>
              <div class="col-sm-4  mb-2 fw-bold">Mobile Number:</div>
              <div class="col-sm-8  mb-2">+1-919999999</div>
              <div class="col-sm-4  mb-2 fw-bold">Birth Date:</div>
              <div class="col-sm-8  mb-2">2/4/1990</div>
              <div class="col-sm-4  mb-2 fw-bold">Blood Group:</div>
              <div class="col-sm-8  mb-2">B+</div>
              <div class="col-sm-4  mb-2 fw-bold">Treatment:</div>
              <div class="col-sm-8  mb-2"><span class="badge bg-info fw-600 rounded-pill px-2 fs-10">Maleria</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="detailpatientmodal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl rounded-10 modal-dialog-centered">
      <div class="modal-content border-0 shadow-sm bg-white">
        <div class="modal-header">
          <h5 class="text-dark text-capitalize mb-0 p-3 text-gray">Patient Detail</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="bg-white border shadow-sm mb-4 py-2 rounded-10 overflow-hidden">
            <div class="d-flex justify-content-center">
              <div class="patient-img text-center mb-3">
                <img src="includes/images/pexels-mart-production-7089401.jpg" alt="" class="rounded-circle">
              </div>
            </div>
            <div class="px-3 py-2">
              <div class="row">
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Patient Name: </span>
                  <span class="fs-14 fw-500">Andrew</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Age: </span>
                  <span class="fs-14 fw-500">30</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Gender:</span>
                  <span class="fs-14 fw-500">Male</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Address:</span>
                  <span class="fs-14 fw-500">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Totam ipsum,
                    earum, aut natus voluptatibus porro aspernatur quia voluptatem ducimus enim amet explicabo, quae
                    minus sequi.</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Email:</span>
                  <span class="fs-14 fw-500">andrew0157@gmail.com</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Mobile Number:</span>
                  <span class="fs-14 fw-500">+1-100141242</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Birth Date: </span>
                  <span class="fs-14 fw-500">01/12/1992</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Blood Group:</span>
                  <span class="fs-14 fw-500">B+</span>
                </div>
                <div class="col-lg-4 mb-4">
                  <span class="text-dark-primary mb-1 fw-600 me-1">Treatment:</span>
                  <span class="badge bg-info fw-500 rounded-pill px-2 fs-10">Maleria</span>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-white border shadow-sm  mb-4 rounded-10">
            <nav>
              <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <button class="nav-link active" id="pat-history" data-bs-toggle="tab" data-bs-target="#pathistory-tab"
                  type="button" role="tab" aria-controls="pathistory-tab" aria-selected="true">Personal
                  Information</button>
                <button class="nav-link" id="pat-setting" data-bs-toggle="tab" data-bs-target="#pat-settings"
                  type="button" role="tab" aria-controls="pat-settings" aria-selected="false">Other Details</button>
              </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
              <div class="tab-pane fade show active py-3" id="pathistory-tab" role="tabpanel"
                aria-labelledby="pat-history">
                <div class="slim-outer">
                  <div id="pat-scroll" class="px-3 py-2">
                    <ul class="timeline-1 text-black">
                      <li class="event mb-3 border-b-dashed pb-4 px-3">
                        <div class="fs-12 text-slate mb-2">07-12-23</div>
                        <div class="row mb-2 align-items-center">
                          <div class="col-4">
                            <h5 class="text-dark-primary mb-0 fw-bold">Knee Pain</h5>
                          </div>
                          <div class="col-8 badge-secondary rounded-pill py-2">
                            <div class="d-flex flex-wrap justify-content-between align-items-center fs-14 gap-2">
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Assigned Doctor: </h6>Dr Anna
                              </div>
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Next Visit: </h6>N/A
                              </div>
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Payment Status: </h6><span
                                  class="badge custom-badge bg-success fw-600 rounded-pill px-3 fs-10">Paid</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="text-gray">
                          <h6 class="text-dark-primary mb-1 fw-600">Description:</h6>
                          <span class="fs-14">Lorem ipsum dolor sit amet consectetur adipisicing elit. Harum velit eaque
                            dignissimos sed odit sequi expedita debitis neque voluptatibus sit distinctio amet alias
                            quasi quidem natus quam officiis quo incidunt, at sunt vero, quaerat, tenetur quod? Vel
                            animi accusamus eum sed explicabo consectetur, obcaecati ratione amet sequi tempore aliquid
                            nostrum!</span>
                        </div>
                      </li>
                      <li class="event mb-3 border-b-dashed pb-4 px-3">
                        <div class="fs-12 text-slate mb-2">04-09-23</div>
                        <div class="row mb-2 align-items-center">
                          <div class="col-4">
                            <h5 class="text-dark-primary mb-0 fw-bold">Regular Checkup</h5>
                          </div>
                          <div class="col-8 badge-success py-2 rounded-pill">
                            <div class="d-flex flex-wrap justify-content-between align-items-center fs-14 gap-2">
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Assigned Doctor: </h6>Dr Jacob
                              </div>
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Next Visit: </h6>N/A
                              </div>
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Payment Status: </h6><span
                                  class="badge custom-badge bg-success fw-600 rounded-pill px-3 fs-10">Paid</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="text-gray">
                          <h6 class="text-dark-primary mb-1 fw-600">Description:</h6>
                          <span class="fs-14">Lorem ipsum dolor sit amet consectetur adipisicing elit. Harum velit eaque
                            dignissimos sed odit sequi expedita debitis neque voluptatibus sit distinctio amet alias
                            quasi quidem natus quam officiis quo incidunt, at sunt vero, quaerat, tenetur quod? Vel
                            animi accusamus eum sed explicabo consectetur, obcaecati ratione amet sequi tempore aliquid
                            nostrum!</span>
                        </div>
                      </li>
                      <li class="event mb-3 border-b-dashed pb-4 px-3">
                        <div class="fs-12 text-slate mb-2">02-06-23</div>
                        <div class="row mb-2 align-items-center">
                          <div class="col-4">
                            <h5 class="text-dark-primary mb-0 fw-bold">Leg Fracture</h5>
                          </div>
                          <div class="col-8 badge-orange py-2 rounded-pill">
                            <div class="d-flex flex-wrap justify-content-between align-items-center fs-14 gap-2">
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Assigned Doctor: </h6>Dr Michaelle
                              </div>
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Next Visit: </h6>N/A
                              </div>
                              <div class="d-flex align-items-center justify-content-start">
                                <h6 class="text-dark-primary mb-1 fw-600 me-1">Payment Status: </h6><span
                                  class="badge custom-badge bg-success fw-600 rounded-pill px-3 fs-10">Paid</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="text-gray">
                          <h6 class="text-dark-primary mb-1 fw-600">Description:</h6>
                          <span class="fs-14">Lorem ipsum dolor sit amet consectetur adipisicing elit. Harum velit eaque
                            dignissimos sed odit sequi expedita debitis neque voluptatibus sit distinctio amet alias
                            quasi quidem natus quam officiis quo incidunt, at sunt vero, quaerat, tenetur quod? Vel
                            animi accusamus eum sed explicabo consectetur, obcaecati ratione amet sequi tempore aliquid
                            nostrum!</span>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade px-3 py-4" id="pat-settings" role="tabpanel" aria-labelledby="pat-settings">
                <p class="fs-14">Lorem ipsum dolor sit amet consectetur adipisicing elit. Id deleniti repudiandae nam
                  sed quod quo, quisquam sunt odio quidem, velit in enim aut reiciendis quae dolor consequatur. Quasi,
                  temporibus quisquam.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="deleteconf" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0">
        <div class="modal-body">
          <div class="px-4 text-center">
            <i class="bi bi-exclamation-triangle-fill text-danger fs-1"></i>
            <h6 class="text-dark mb-3">Are you sure you want to delete this ?</h6>
            <button class="btn btn-outline-danger me-3 rounded-pill" data-bs-dismiss="modal"
              aria-label="Close">Cancel</button>
            <button class="btn btn-danger rounded-pill">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="assets/js/jquery-3.7.0.js"></script>
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/jquery.dataTables.min.js"></script>
  <script src="assets/js/dataTables.bootstrap5.min.js"></script>
  <script src="assets/js/dataTables.responsive.min.js"></script>
  <script src="assets/js/apexcharts.js"></script>
  <script src="assets/js/jquery.validate.js"></script>
  <script src="assets/js/bootstrap-datepicker.min.js"></script>
  <script src="assets/js/jquery.slimscroll.min.js"></script>
  <script src="assets/js/togglepassword.js"></script>
  <script src="assets/js/all.min.js"></script>
  <script src="assets/js/script.js"></script>
  <script>
    $(document).ready(function() {
      let currentPage = 0;

      // Check if the user is authenticated (token exists)
      const token = localStorage.getItem('access_token');
      const userStatusElement = $('.user-status');

      let lastActivityTime = Date.now();
      const INACTIVITY_TIMEOUT = 30 * 60 * 1000; // 30 minutes in milliseconds

      // Update last activity time on user interaction
      $(document).on('mousemove keydown click', function () {
        lastActivityTime = Date.now();
      });

      function checkInactivity() {
        const currentTime = Date.now();
        if (currentTime - lastActivityTime > INACTIVITY_TIMEOUT) {
          localStorage.removeItem('access_token');
          localStorage.removeItem('user');
          userStatusElement.text('Offline').removeClass('text-success text-warning').addClass('text-danger');
          alert('You have been inactive for too long. Please log in.');
          window.location.href = '/index.html';
        }
      }

      // Check inactivity every minute
      setInterval(checkInactivity, 60 * 1000);

      function updateUserStatus() {
        if (!token) {
          userStatusElement.text('Offline').removeClass('text-success text-warning').addClass('text-danger');
          setTimeout(() => {
            alert('No session found. Please log in.');
            window.location.href = '/index.html';
          }, 1000);
          return;
        }

        $.ajax({
          url: '/api/v1/auth/validate-token',
          type: 'GET',
          headers: {
            'Authorization': 'Bearer ' + token
          },
          success: function (response) {
            if (response && response.data && response.data.status) {
              const status = response.data.status;
              if (status === 'Available') {
                userStatusElement.text(status).removeClass('text-danger text-warning').addClass('text-success');
              } else if (status === 'Offline') {
                userStatusElement.text(status).removeClass('text-success text-warning').addClass('text-danger');
                localStorage.removeItem('access_token');
                localStorage.removeItem('user');
                setTimeout(() => {
                  alert('Session invalid. Please log in again.');
                  window.location.href = '/index.html';
                }, 1000);
              } else if (status === 'Away') {
                userStatusElement.text(status).removeClass('text-success text-danger').addClass('text-warning');
                localStorage.removeItem('access_token');
                localStorage.removeItem('user');
                setTimeout(() => {
                  alert('Session expired. Please log in again.');
                  window.location.href = '/index.html';
                }, 1000);
              }
            } else {
              userStatusElement.text('Offline').removeClass('text-success text-warning').addClass('text-danger');
              localStorage.removeItem('access_token');
              localStorage.removeItem('user');
              setTimeout(() => {
                alert('Session invalid. Please log in again.');
                window.location.href = '/index.html';
              }, 1000);
            }
          },
          error: function (xhr) {
            if (xhr.status === 401) {
              userStatusElement.text('Away').removeClass('text-success text-danger').addClass('text-warning');
              localStorage.removeItem('access_token');
              localStorage.removeItem('user');
              setTimeout(() => {
                alert('Session expired. Please log in again.');
                window.location.href = '/index.html';
              }, 1000);
            } else {
              userStatusElement.text('Offline').removeClass('text-success text-warning').addClass('text-danger');
              localStorage.removeItem('access_token');
              localStorage.removeItem('user');
              setTimeout(() => {
                alert('Session invalid. Please log in again.');
                window.location.href = '/index.html';
              }, 1000);
            }
          }
        });
      }

      // Initial status check and periodic updates
      updateUserStatus();
      setInterval(updateUserStatus, 300000); // 5 minutes

      // Retrieve user data from localStorage
      const userData = JSON.parse(localStorage.getItem('user'));
      if (userData) {
        const userFirstName = userData.firstName || 'User';
        let userRole = userData.userRole || 'Unknown';
        userRole = userRole.replace('ROLE_', '').replace('_', ' ').toLowerCase();
        userRole = userRole.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
        $('.user-firstname').text(userFirstName);
        $('.user-role').text(userRole);
        $('.dropdown-user-greeting').text(`Hello ${userFirstName}`);
      } else {
        console.warn('User data not found in localStorage. Redirecting to login page.');
        window.location.href = '/index.html';
        return;
      }

      // Display current year in footer
      $('#currentYear').text(new Date().getFullYear());

      // Search functionality
      function performSearch(query, targetResults) {
        if (query.length < 3) {
          targetResults.hide();
          return;
        }

        $.ajax({
          url: `/api/v1/search/assets?query=${encodeURIComponent(query)}&page=1&size=10`,
          type: 'GET',
          headers: {
            'Authorization': 'Bearer ' + token
          },
          success: function (response) {
            const resultsList = targetResults.find('ul');
            resultsList.empty();

            if (response.data && response.data.content && response.data.content.length > 0) {
              response.data.content.forEach(asset => {
                resultsList.append(`
                  <li class="p-2 rounded-end-3">
                    <a href="/fd-allassets.html?assetId=${asset.id}">
                      <div class="d-flex align-items-center notification-row">
                        <div class="d-flex align-items-center text-center p-0 notification-user-img">
                          <img src="${asset.image || '/includes/images/01.jpg'}" width="48" height="48" alt="">
                        </div>
                        <div class="notification-content">
                          <div class="text-dark mb-0 fw-500 notification-msg">
                            <span class="text-dark fw-bold mb-0">${asset.name}</span>
                          </div>
                          <div class="d-flex justify-content-between">
                            <div class="w-100 text-truncate fs-12 fw-500">${asset.description || 'N/A'}</div>
                            <p class="text-dark text-end mb-0 fs-12 fw-500">${asset.quantity} units</p>
                          </div>
                        </div>
                      </div>
                    </a>
                  </li>
                `);
              });
              targetResults.show();
            } else {
              resultsList.append(`
                <li class="p-2 rounded-end-3">
                  <div class="text-dark fs-12">No assets found.</div>
                </li>
              `);
              targetResults.show();
            }
          },
          error: function (xhr) {
            const resultsList = targetResults.find('ul');
            resultsList.empty();
            let message = 'Search failed.';
            if (xhr.status === 401) {
              message = 'Unauthorized: Please log in again.';
              localStorage.removeItem('access_token');
              localStorage.removeItem('user');
              window.location.href = '/index.html';
            } else if (xhr.responseJSON && xhr.responseJSON.message) {
              message = xhr.responseJSON.message;
            }
            resultsList.append(`
              <li class="p-2 rounded-end-3">
                <div class="text-dark fs-12">${message}</div>
              </li>
            `);
            targetResults.show();
          }
        });
      }

      // Desktop search
      $('.desktop-search-input').on('input', function () {
        const query = $(this).val().trim();
        performSearch(query, $('#desktop-search-results'));
      });

      // Mobile search (assuming mobile search input exists in a collapsed section)
      $('.mobile-search-input').on('input', function () {
        const query = $(this).val().trim();
        performSearch(query, $('#mobile-search-results'));
      });

      // Hide search results when clicking outside
      $(document).on('click', function (e) {
        if (!$(e.target).closest('#desktop-search-form').length && !$(e.target).closest('#mobile-search-form').length) {
          $('#desktop-search-results').hide();
          $('#mobile-search-results').hide();
        }
      });

      // Prevent form submission
      $('#desktop-search-form, #mobile-search-form').on('submit', function (e) {
        e.preventDefault();
      });

      // Fetch notifications
      function fetchNotifications() {
        $.ajax({
          url: '/api/v1/notifications',
          type: 'GET',
          headers: {
            'Authorization': 'Bearer ' + token
          },
          success: function (response) {
            if (response && response.data && Array.isArray(response.data)) {
              const notifications = response.data;
              const notificationBox = $('#notification_box');
              const mobileNotifications = $('#mobile-notifications ul');
              notificationBox.empty();
              mobileNotifications.empty();
              notifications.forEach(notification => {
                const timeAgo = new Date(notification.createdAt).toLocaleString();
                const notificationItem = `
                  <li class="p-2 rounded-end-3">
                    <a href="javascript:void(0)">
                      <div class="d-flex align-items-center notification-row">
                        <div class="d-flex align-items-center text-center p-0 notification-user-img">
                          <img src="${notification.senderProfilePicture || '/includes/images/01.jpg'}" width="48" height="48" alt="">
                        </div>
                        <div class="notification-content">
                          <div class="text-dark mb-0 fw-500 notification-msg">
                            <span class="text-dark fw-bold mb-0">${notification.senderName || 'Unknown'}</span>
                            <span class="fw-light fs-14">${notification.message || 'No message'}</span>
                          </div>
                          <p class="text-dark text-end mb-0 fs-12 fw-500">${timeAgo}</p>
                        </div>
                      </div>
                    </a>
                  </li>`;
                notificationBox.append(notificationItem);
                mobileNotifications.append(notificationItem);
              });
            }
          },
          error: function (xhr) {
            if (xhr.status === 401) {
              alert('Session expired. Please log in again.');
              localStorage.removeItem('access_token');
              localStorage.removeItem('user');
              window.location.href = '/index.html';
            }
          }
        });
      }

      // Fetch messages
      function fetchMessages() {
        $.ajax({
          url: '/api/v1/messages',
          type: 'GET',
          headers: {
            'Authorization': 'Bearer ' + token
          },
          success: function (response) {
            if (response && response.data && Array.isArray(response.data)) {
              const messages = response.data;
              const messageBox = $('#message_box');
              const mobileMessages = $('#mobile-messages ul');
              messageBox.empty();
              mobileMessages.empty();
              messages.forEach(message => {
                const timeAgo = new Date(message.createdAt).toLocaleString();
                const messageItem = `
                  <li class="p-2 rounded-end-3">
                    <a href="javascript:void(0)">
                      <div class="d-flex align-items-center notification-row">
                        <div class="d-flex align-items-center text-center p-0 notification-user-img">
                          <img src="${message.senderProfilePicture || '/includes/images/01.jpg'}" width="48" height="48" alt="">
                        </div>
                        <div class="notification-content">
                          <div class="text-dark mb-0 fw-500 notification-msg">
                            <span class="text-dark fw-bold mb-0">${message.senderName || 'Unknown'}</span>
                          </div>
                          <div class="d-flex justify-content-between">
                            <div class="w-100 text-truncate fs-12 fw-500">${message.content || 'No content'}</div>
                            <p class="text-dark text-end mb-0 fs-12 fw-500 msg-time">${timeAgo}</p>
                          </div>
                        </div>
                      </div>
                    </a>
                  </li>`;
                messageBox.append(messageItem);
                mobileMessages.append(messageItem);
              });
            }
          },
          error: function (xhr) {
            if (xhr.status === 401) {
              alert('Session expired. Please log in again.');
              localStorage.removeItem('access_token');
              localStorage.removeItem('user');
              window.location.href = '/index.html';
            }
          }
        });
      }

      // Initial fetch for all required data
      fetchNotifications();
      fetchMessages();

      // Poll for updates every 30 seconds
      setInterval(() => {
        fetchNotifications();
        fetchMessages();
      }, 30000);

     

      // Logout Handler
      $('.logout-btn').on('click', function(e) {
        e.preventDefault();
        $.ajax({
          url: '/api/v1/auth/logout',
          type: 'POST',
          headers: {
            'Authorization': 'Bearer ' + token
          },
          success: function(response) {
            localStorage.removeItem('access_token');
            localStorage.removeItem('user');
            updateUserStatus(); // Update to Offline after logout
            window.location.href = '/index.html';
          },
          error: function(xhr) {
            alert('Logout failed: ' + (xhr.responseText || 'Unknown error'));
            localStorage.removeItem('access_token');
            localStorage.removeItem('user');
            updateUserStatus(); // Update to Offline on failure
            window.location.href = '/index.html';
          }
        });
      });
    });
  </script>
</body>

</html>